{% extends "layout_fluid.html" %}

{% block css %}
<style type="text/css">
  table {
    border: 2px solid black;
    border-collapse: separate !important;
    border-radius: 5px !important;
    -moz-border-radius: 5px !important;
    box-shadow: 5px 5px 3px #888888 !important;
    text-align: left;
  }

  td {
    border: 1px solid black;
    text-align: left;

  }

  label {
    font-weight: bold;
    text-align: right;
    width: 90px;
  }

  .tableTitle {
    background: -moz-linear-gradient(100% 100% 90deg, #eee, #ddd) !important;
    background: -webkit-linear-gradient(#eee, #fff) !important;
    width: 200px !important;
  }

  th.title {
    width: auto !important;
  }

  th {
    width: 80px;
  }

  .Description {
    width: 800px;
  }

  .formatForm {
    width: 1000px;
  }
</style>
{% endblock %}

{% block js %}
  <script type="text/javascript" src="{{ STATIC_URL }}js/contextual_help.js"></script>
{% endblock %}

{% block content %}
<style>
#contextual_help {
  width: 220px;
  background-color: #eee;
  padding: 1em;
  position: absolute;
  left: 700px;
}
</style>

<script>
$(document).ready(function() {
  archivematicaEnableContextualHelp();
});
</script>

{% load json_filters %}

{% block content %} &lt;script type="text/javascript"&gt;<![CDATA[ var accessFormats = {{ accessFormats|jsonify }}; ]]>&lt;/script&gt; {% endblock %}

{% block content %}

  <title>
    Format ID Editor
  </title>
<h2>Format policy - Archivematica Format Policy Rule</h2>
  The format policy Archivematica Rule composed of a format id, a command and a command classification.
<br><br>

<script type=j"application/javascript">

function getFormats(classification) {
	$.get("preservation_planning/fprdownload/", function(data, textStatus)
    {
        if (data['result'] == 'success') {
            $("div#fpr").append("<p>FPR updated.</p>");
            AddElement();
        } else {
            $("div#fpr").append("<p>Unable to update FPR.</p>");
            AddElement(); 
        }
    }, "json");
}

$('#id_purpose').change(function() {
    var options = '';
    options = getFormats($(this).val());
    $('#id_formatID').html(options);
});	
	
</script> 

<h3>Archivematica Format Policy Rule</h3>
  	 <form class="form-stacked" method="post" action="{% url components.preservation_planning.views.fpr_edit_rule %}">

    {% include "_form.html" %}
    
    <div class="actions">
          {% if id %}
            <button type="submit" class="btn primary">Save</button>
          {% else %}
            <button type="submit" class="btn primary">Create</button>
          {% endif %}
          <a href="{% url components.preservation_planning.views.fpr_edit_rule uuid %}" class="btn">Cancel</a>
        </div>

    </form>

 <!-- define contextual help -->

  <div id='id_purpose_help' style='display:none'>
    <p>Select a purpose that describes what this rule will be used for. </p>
  </div>

  <div id='id_formatID_help' style='display:none'>
    <p>Select an existing format id that this rule applies to. </p>
  </div>

  <div id='id_command_help' style='display:none'>
    <p>Select an existing command that will be run when this rule is applied. </p>
  </div>

{% endblock %}